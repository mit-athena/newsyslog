# $Header: /afs/dev.mit.edu/source/repository/athena/etc/newsyslog/.build,v 1.3 1996-05-07 19:35:37 ghudson Exp $

set rule = skip

if ( $installman == "1" ) then
	exit 0
endif

cd $BUILD/$package

if ( "$installonly" == "0" ) then
	### If not just installing, configure, clean and build...
	((echo "Configuring in $package..." ; \
	rm -f config.cache; \
	./configure) >>& $outfile && \
	(echo "Cleaning in $package..." ; make clean) >>& $outfile && \
	(echo "Building in $package..." ; make) >>& $outfile)

	### ...and whine if we fail.
	if ( $status == 1 ) then
        	echo "We bombed in $package" >> & $outfile
        	exit -1
	endif
endif

### Finally, install.
(echo "Installing in $package..." ; \
make install) >>& $outfile

if ( $status == 1 ) then
       	echo "We bombed in $package" >> & $outfile
       	exit -1
endif
